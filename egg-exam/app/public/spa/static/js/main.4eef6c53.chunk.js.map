{"version":3,"sources":["components/Loading.module.css","service/userManger.js","utils/router-view.js","utils/dynamic.js","config/menu.js","config/router.config.js","utils/global.js","webpack:///./src/theme/markdown.less?678d","theme/markdown.less","components/Loading.jsx","router/index.js","model/global.js","main.js","app.js","utils/request.js"],"names":["module","exports","loadingWrapper","loading","__webpack_require__","r","__webpack_exports__","d","addUser","addIdentity","addAuthorityApi","addAuthorityView","setIdentityApi","setIdentityView","updateUser","showUser","showIdentity","showApiAuthority","showApiIdentity","showViewAuthority","showViewIdentity","loginApi","getUserInfo","getViewAuthority","_utils_request__WEBPACK_IMPORTED_MODULE_0__","payload","request","method","body","_ref","identity_text","concat","arr","i","push","str","join","loginInfo","user_id","RouterView","childRoutes","this","props","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","dva_router__WEBPACK_IMPORTED_MODULE_6__","map","item","key","View","component","path","render","UtilGlobal","history","Object","assign","children","Component","loadedModelNameSpace","dynamic","options","app","_options$models","models","_Component","_class2","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","AsyncComponent","load","Promise","all","toConsumableArray","then","slice","forEach","indexOf","default","namespace","model","clearTimeout","timer","changeState","isOpen","mounted","setState","setTimeout","inherits","createClass","value","react_default","groups","groupName","groupIcon","basePath","e","bind","routerConfig","text","id","showAside","window","content","hmr","transform","insertInto","undefined","locals","Loding","className","style","display","Root","connect","store","objectSpread","global","utilGlobal","isLoad","dispatch","type","_this$props","Fragment","Loading_Loding","router","router_view","RouterConfig","RootRouter","router_Root","model_global","viewAuthority","reducers","effects","regenerator_default","mark","put","result","wrap","_context","prev","next","sent","code","data","stop","use","createLoading","start","dva__WEBPACK_IMPORTED_MODULE_0__","dva__WEBPACK_IMPORTED_MODULE_0___default","n","history_createBrowserHistory__WEBPACK_IMPORTED_MODULE_1__","history_createBrowserHistory__WEBPACK_IMPORTED_MODULE_1___default","dva","createHistory","console","log","codeMessage","200","201","202","204","400","401","403","404","406","410","422","500","502","503","504","checkStatus","response","status","errortext","statusText","antd_lib_notification__WEBPACK_IMPORTED_MODULE_2___default","error","message","url","description","Error","name","cachedSave","hashcode","contentType","headers","get","match","clone","sessionStorage","setItem","Date","now","option","D_software_phpStudy_WWW_react_exam_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","expirys","fingerprint","JSON","stringify","hash","sha256","update","digest","token","getItem","location","href","newOptions","credentials","authorization","FormData","Accept","Content-Type","cached","whenCached","Response","Blob","json","removeItem","fetch","catch"],"mappings":"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","file":"static/js/main.4eef6c53.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loadingWrapper\":\"Loading_loadingWrapper__10spR\",\"loading\":\"Loading_loading__1XU7z\"};","import request from '../utils/request'\r\n// 添加用户\r\nexport function addUser(payload){\r\n    return request('/user',{\r\n        method:'POST',\r\n        body:payload\r\n    });\r\n}\r\n\r\n// 添加身份\r\nexport function addIdentity({identity_text}){\r\n    return request(`/user/identity/edit?identity_text=${identity_text}`);\r\n}\r\n\r\n// 添加api接口权限\r\nexport function addAuthorityApi(payload){\r\n    let arr = [];\r\n    for(let i in payload){\r\n        arr.push(`${i}=${payload[i]}`);\r\n    }\r\n    let str = '?'+arr.join('&');\r\n    \r\n\r\n    return request(`/user/authorityApi/edit${str}`);\r\n}\r\n\r\n// 添加视图接口权限\r\nexport function addAuthorityView(payload){\r\n    let arr = [];\r\n    for(let i in payload){\r\n        arr.push(`${i}=${payload[i]}`);\r\n    }\r\n    let str = '?'+arr.join('&'); \r\n    return request(`/user/authorityView/edit${str}`);\r\n}\r\n\r\n// 给身份设定api接口权限\r\nexport function setIdentityApi(payload){\r\n    return request('/user/setIdentityApi',{\r\n        method:'POST',\r\n        body:payload\r\n    })\r\n}\r\n\r\n// 给身份设定视图权限\r\nexport function setIdentityView(payload){\r\n    return request('/user/setIdentityView',{\r\n        method:'POST',\r\n        body:payload\r\n    });\r\n}\r\n\r\n// 更新用户信息（用户名，用户密码，用户身份）\r\nexport function updateUser(payload){\r\n    return request('/user/user',{\r\n        method:'PUT',\r\n        body:payload\r\n    });\r\n}\r\n\r\n// 展示所有的用户数据\r\nexport function showUser(){\r\n    return request('/user/user');\r\n}\r\n// 展示所有的身份数据\r\nexport function showIdentity(){\r\n    return request('/user/identity');\r\n}\r\n// 展示所有的api接口权限数据\r\nexport function showApiAuthority(){\r\n    return request('/user/api_authority');\r\n}\r\n// 展示身份和api接口数据的关系\r\nexport function showApiIdentity(){\r\n    return request('/user/identity_api_authority_relation');\r\n}\r\n// 展示视图权限的数据\r\nexport function showViewAuthority(){\r\n    return request('/user/view_authority');\r\n}\r\n// 展示身份和视图权限的关系\r\nexport function showViewIdentity(){\r\n    return request('/user/identity_view_authority_relation');\r\n}\r\n// 登录接口\r\n\r\nexport function loginApi(loginInfo){\r\n    return request('/user/login',{\r\n        method:'POST',\r\n        body:loginInfo\r\n    });\r\n}\r\n\r\n// 获取当前用户信息的接口\r\nexport function getUserInfo(){\r\n    return request('/user/userInfo');\r\n}\r\n\r\n// 根据用户id，返回该用户的视图权限\r\nexport function getViewAuthority(user_id){\r\n    let str = `?user_id=${user_id}`;\r\n    return request(`/user/new${str}`);\r\n}","import React , {Component} from 'react'\r\nimport {Route,Switch} from 'dva/router'\r\nimport UtilGlobal from './global'\r\nclass RouterView extends Component{\r\n    render(){\r\n        let {childRoutes} = this.props;\r\n        return <Switch>\r\n            {\r\n                childRoutes && childRoutes.map((item,key)=>{\r\n                    let View = item.component;\r\n                    return <Route\r\n                        key={key} \r\n                        path={item.path} \r\n                        render={(props)=>{\r\n                            UtilGlobal.history = props.history;\r\n                            return <View {...props} childRoutes={item.children} />\r\n                        }} \r\n                    />\r\n                })\r\n            }\r\n        </Switch>\r\n    }\r\n}\r\nexport default RouterView;","import React , {Component} from 'react'\r\nimport UtilGlobal from './global'\r\nconst loadedModelNameSpace = [];\r\n// window.lod = loadedModelNameSpace;\r\nfunction dynamic(options){\r\n    let {app,models=[],component} = options;\r\n    return class extends Component{\r\n        constructor(props){\r\n            super(props);\r\n            this.timer = setTimeout(()=>{\r\n                UtilGlobal.changeState({isOpen:true});\r\n            },500);\r\n            this.load();\r\n        }\r\n        state = {\r\n            AsyncComponent:null\r\n        }\r\n        render(){\r\n            let {AsyncComponent} = this.state;\r\n            if(AsyncComponent){\r\n                return <AsyncComponent {...this.props} />\r\n            }\r\n            return null;\r\n        }\r\n        load = ()=>{\r\n            Promise.all([component(),...models.map(item=>item())]).then(arr=>{\r\n                arr.slice(1).forEach(item=>{\r\n                    if(loadedModelNameSpace.indexOf(item.default.namespace) === -1){\r\n                        loadedModelNameSpace.push(item.default.namespace);\r\n                        app.model(item.default);\r\n                    }\r\n                });\r\n                clearTimeout(this.timer);\r\n                UtilGlobal.changeState({isOpen:false});\r\n                let AsyncComponent = arr[0].default;\r\n                if(this.mounted){\r\n                    this.setState({AsyncComponent});\r\n                }\r\n            })\r\n        }\r\n        componentDidMount(){\r\n            this.mounted = true;\r\n        }\r\n        componentWillUnmount(){\r\n            this.mounted = false;\r\n        }\r\n    }\r\n}\r\nexport default dynamic;","import dynamic from '../utils/dynamic'\r\nimport app from '../app'\r\nimport UtilGlobal from '../utils/global'\r\nconst {basePath} = UtilGlobal;\r\nconst groups = {\r\n    MENU:{\r\n        groupName:'菜单管理',groupIcon:'user'\r\n    }\r\n}\r\nexport default {\r\n    path:basePath+'/main/menu',\r\n    component:dynamic({\r\n        component:()=>import('../page/addMenu'),\r\n        models:[()=>import('../model/addMenu')],\r\n        app\r\n    }),\r\n    text:'添加菜单',\r\n    groupName:groups.MENU.groupName,\r\n    groupIcon:groups.MENU.groupIcon,\r\n    id:'main-menu'\r\n}","import dynamic from '../utils/dynamic'\r\nimport app from '../app'\r\nimport menu from './menu'\r\nimport UtilGlobal from '../utils/global'\r\nconst {basePath} = UtilGlobal;\r\nexport const groups = {\r\n    QUESTIONSMANGER:{\r\n        groupName:'试题管理',groupIcon:'user'\r\n    },\r\n    USERMANGER:{\r\n        groupName:'用户管理',groupIcon:'user'\r\n    },\r\n    EXAMMANGER:{\r\n        groupName:'考试管理',groupIcon:'user'\r\n    }\r\n}\r\nconst routerConfig = [\r\n    {\r\n        path:basePath+'/login',\r\n        component:dynamic({\r\n            component:()=>import('../page/login'),\r\n            models:[()=>import('../model/login')],\r\n            app\r\n        }),\r\n        text:'登录',\r\n        id:'login'\r\n    },\r\n    {\r\n        path:basePath+'/main',\r\n        component:dynamic({\r\n            component:()=>import('../page/main'),\r\n            models:[()=>import('../model/main'),()=>import('../model/login')],\r\n            app\r\n        }),\r\n        text:'主界面',\r\n        id:'main',\r\n        children:[\r\n            // 试题管理\r\n            {\r\n                path:basePath+'/main/addQuestions',\r\n                component:dynamic({\r\n                    component:()=>import('../page/addQuestions'),\r\n                    models:[()=>import('../model/addQuestions')],\r\n                    app\r\n                }),\r\n                text:'添加试题',\r\n                groupName:groups.QUESTIONSMANGER.groupName,\r\n                groupIcon:groups.QUESTIONSMANGER.groupIcon,\r\n                id:'main-addQuestions'\r\n            },\r\n            {\r\n                path:basePath+'/main/questionsType',\r\n                component:dynamic({\r\n                    component:()=>import('../page/questionsType'),\r\n                    models:[()=>import('../model/questionsType')],\r\n                    app\r\n                }),\r\n                text:'试题分类',\r\n                groupName:groups.QUESTIONSMANGER.groupName,\r\n                groupIcon:groups.QUESTIONSMANGER.groupIcon,\r\n                id:'main-questionsType'\r\n            },\r\n            {\r\n                path:basePath+'/main/watchQuestions',\r\n                component:dynamic({\r\n                    component:()=>import('../page/watchQuestions'),\r\n                    models:[()=>import('../model/watchQuestions')],\r\n                    app\r\n                }),\r\n                text:'查看试题',\r\n                groupName:groups.QUESTIONSMANGER.groupName,\r\n                groupIcon:groups.QUESTIONSMANGER.groupIcon,\r\n                id:'main-watchQuestions'\r\n            },\r\n            {\r\n                path:basePath + '/main/editQuestions',\r\n                component:dynamic({\r\n                    component:()=>import('../page/editQuestions'),\r\n                    models:[()=>import('../model/addQuestions'),()=>import('../model/watchQuestions')],\r\n                    app\r\n                }),\r\n                showAside:'no',\r\n                text:'编辑试题',\r\n                groupName:groups.QUESTIONSMANGER.groupName,\r\n                groupIcon:groups.QUESTIONSMANGER.groupIcon,\r\n                id:'main-editQuestions'\r\n            },\r\n            {\r\n                path:basePath + '/main/questions/detail',\r\n                component:dynamic({\r\n                    component:()=>import('../page/questionsDetail'),\r\n                    models:[()=>import('../model/addQuestions'),()=>import('../model/watchQuestions')],\r\n                    app\r\n                }),\r\n                showAside:'no',\r\n                text:'试题详情',\r\n                groupName:groups.QUESTIONSMANGER.groupName,\r\n                groupIcon:groups.QUESTIONSMANGER.groupIcon,\r\n                id:'main-questionsDetail'\r\n            },\r\n            // 用户管理\r\n            {\r\n                path:basePath+'/main/addUser',\r\n                component:dynamic({\r\n                    component:()=>import('../page/addUser'),\r\n                    models:[()=>import('../model/addUser'),()=>import('../model/showUser')],\r\n                    app\r\n                }),\r\n                text:'添加用户',\r\n                groupName:groups.USERMANGER.groupName,\r\n                groupIcon:groups.USERMANGER.groupIcon,\r\n                id:'main-addUser'\r\n            },\r\n            {\r\n                path:basePath+'/main/showUser',\r\n                component:dynamic({\r\n                    component:()=>import('../page/showUser'),\r\n                    models:[()=>import('../model/showUser')],\r\n                    app\r\n                }),\r\n                text:'用户展示',\r\n                groupName:groups.USERMANGER.groupName,\r\n                groupIcon:groups.USERMANGER.groupIcon,\r\n                id:'main-showUser'\r\n            },\r\n            // 考试管理\r\n            {\r\n                path:basePath+'/main/addExam',\r\n                component:dynamic({\r\n                    component:()=>import('../page/addExam'),\r\n                    models:[()=>import('../model/addExam')],\r\n                    app\r\n                }),\r\n                text:'添加考试',\r\n                groupName:groups.EXAMMANGER.groupName,\r\n                groupIcon:groups.EXAMMANGER.groupIcon,\r\n                id:'main-addExam'\r\n            }\r\n        ]\r\n    }\r\n]\r\nif(process.env.NODE_ENV === 'development'){\r\n    routerConfig[1].children.push(menu);\r\n}\r\n\r\nexport default routerConfig;","const UtilGlobal = {\r\n    basePath:'/public/spa/spa'\r\n}\r\nwindow.UtilGlobal = UtilGlobal;\r\nexport default UtilGlobal;","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-5-2!./markdown.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-5-2!./markdown.less\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-5-2!./markdown.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".react-markdown {\\n  line-height: 1.6;\\n  word-wrap: break-word;\\n}\\n.react-markdown > h1:first-child,\\n.react-markdown blockquote:first-child,\\n.react-markdown h2:first-child,\\n.react-markdown h3:first-child,\\n.react-markdown h4:first-child,\\n.react-markdown ol:first-child,\\n.react-markdown p:first-child,\\n.react-markdown pre:first-child,\\n.react-markdown ul:first-child {\\n  margin-top: 0;\\n}\\n.react-markdown blockquote ol:last-child,\\n.react-markdown blockquote p:last-child,\\n.react-markdown blockquote ul:last-child {\\n  margin-bottom: 0;\\n}\\n.react-markdown blockquote,\\n.react-markdown h4,\\n.react-markdown ol,\\n.react-markdown p,\\n.react-markdown pre,\\n.react-markdown table,\\n.react-markdown ul {\\n  margin: 1.5em 0;\\n}\\n.react-markdown p:first-child {\\n  margin-top: 0;\\n}\\n.react-markdown p:last-child {\\n  margin-bottom: 0;\\n}\\n.react-markdown a {\\n  color: #009a61;\\n  text-decoration: none;\\n  display: inline-block;\\n  max-width: 320px;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  vertical-align: top;\\n}\\n.react-markdown a:hover {\\n  color: #004e31;\\n  text-decoration: underline;\\n}\\n.react-markdown img {\\n  max-width: 100%;\\n  display: block;\\n}\\n.react-markdown blockquote {\\n  margin: 1.5em 0;\\n  padding: 5px 20px;\\n  border-left: 2px solid #009a61;\\n  background: #f6f6f6;\\n  color: #555;\\n  font-size: 1em;\\n}\\n.react-markdown pre {\\n  display: block;\\n  padding: 1em;\\n  overflow: auto;\\n  line-height: 1.3;\\n  max-height: 35em;\\n  color: #657b83;\\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AgMAAABHkjHhAAAACVBMVEWAgIBaWlo+Pj7rTFvWAAAAA3RSTlMHCAw+VhR4AAAA+klEQVQoz4WSMW7EQAhFPxKWNh2FCx+HkaZI6RRb5DYbyVfIJXLKDCFoMbaTKSw/8ZnPAPjaH2xgZcUNUDADD7D9LtDBCLZ45fbkvo/30K8yeI64pPwl6znd/3n/Oe93P3ho9qeh72btTFzqkz0rsJle8Zr81OLEwZ1dv/713uWqvu2pl+k0fy7MWtj9r/tN5q/02z89qa/L4Dc2LvM93kezPfXlME/O86EbY/V9GB9ePX8G1/6W+/9h1dq/HGfTfzT3j/xNo7522Bfnqe5jO/fvhVthlfk434v3iO9zG/UOphyPeinPl1J8Gtaa7xPTa/Dk+RIs4deMvwGvcGsmsCvJ0AAAAABJRU5ErkJggg==) #f6f6f6;\\n  background-size: 30px 30px;\\n}\\n.react-markdown h1,\\n.react-markdown h2,\\n.react-markdown h3 {\\n  margin: 1.5em 0 0;\\n}\\n.react-markdown h1,\\n.react-markdown h2 {\\n  padding-bottom: 10px;\\n  border-bottom: 1px solid #eee;\\n}\\n.react-markdown h1 {\\n  font-size: 2.25em;\\n}\\n.react-markdown h2 {\\n  font-size: 1.75em;\\n}\\n.react-markdown h3 {\\n  font-size: 1.5em;\\n}\\n.react-markdown h4 {\\n  font-size: 1.25em;\\n}\\n.react-markdown h5 {\\n  font-size: 1em;\\n}\\n.react-markdown h6 {\\n  font-size: 0.86em;\\n}\\n.react-markdown hr {\\n  margin: 1.5em auto;\\n  border: 0;\\n  border-top: 2px dotted #eee;\\n}\\n\", \"\"]);\n\n// exports\n","import React, { Component } from 'react'\r\nimport style from './Loading.module.css'\r\nexport default class Loding extends Component {\r\n  render() {\r\n    let {isOpen} = this.props;\r\n    return <div className={style.loadingWrapper} style={{display:isOpen ? 'block' : 'none'}}>\r\n        <span className={style.loading}>loading...</span>\r\n    </div>\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport {BrowserRouter as Router} from 'dva/router'\r\nimport RouterView from '../utils/router-view'\r\nimport RouterConfig from '../config/router.config'\r\nimport Loading from '../components/Loading'\r\nimport {connect} from 'dva'\r\nimport utilGlobal from '../utils/global'\r\nlet mapState = store => {\r\n    return {...store.global}\r\n}\r\n\r\n@connect(mapState)\r\nclass Root extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        utilGlobal.changeState = (payload)=>{\r\n            if(!this.props.isLoad && payload.isOpen){\r\n                payload = {...payload,isLoad:true}\r\n            }\r\n            this.props.dispatch({type:'global/changeState',...payload});\r\n        }\r\n    }\r\n    render(){\r\n        let {isLoad,isOpen} = this.props;\r\n        return <React.Fragment>\r\n            {\r\n                isLoad ? <Loading isOpen={isOpen} /> : null\r\n            }\r\n            <Router>\r\n                <RouterView childRoutes={RouterConfig} />\r\n            </Router>\r\n        </React.Fragment>   \r\n    }\r\n    \r\n}\r\nfunction RootRouter(){\r\n    return <Root />\r\n}\r\nexport default RootRouter;","import { getViewAuthority } from '../service/userManger'\r\nexport default {\r\n    namespace: 'global',\r\n    state: {\r\n        isLoad: false,\r\n        isOpen: false,\r\n        viewAuthority: []\r\n\r\n    },\r\n    reducers: {\r\n        changeState(state, payload) {\r\n            return { ...state, ...payload }\r\n        }\r\n    },\r\n    effects: {\r\n        *getViewAuthority(payload, { call, put }) {\r\n            let { user_id } = payload;\r\n            let result = yield call(getViewAuthority, user_id);\r\n            if (result.code === 1) {\r\n                yield put({ type: 'changeState', viewAuthority: result.data })\r\n            }\r\n        }\r\n    }\r\n}","import app from './app'\r\nimport RootRouter from './router' \r\nimport global from './model/global'\r\nimport createLoading from 'dva-loading'\r\n\r\n// import 'ant-design-pro/dist/ant-design-pro.css'; // 统一引入ant-design-pro样式\r\n// import 'antd/dist/antd.css' //引入antd样式\r\nimport './main.css'\r\nimport './theme/markdown.less'\r\napp.use(createLoading())\r\napp.model(global);\r\napp.router(RootRouter); // 载入路由\r\napp.start('#root'); \r\n\r\n// s5290d-0ey5qj-6bgnq-n9wxq","import dva from 'dva'\r\nimport createHistory from 'history/createBrowserHistory';\r\nconst app = dva({\r\n  history: createHistory(),\r\n});\r\nexport default app;","import fetch from 'dva/fetch'\r\nimport hash from 'hash.js';\r\nimport {\r\n    notification\r\n} from 'antd';\r\nconst router = {\r\n    push(path){\r\n        console.log(path);\r\n    }\r\n}\r\nconst codeMessage = {\r\n    200: '服务器成功返回请求的数据。',\r\n    201: '新建或修改数据成功。',\r\n    202: '一个请求已经进入后台排队（异步任务）。',\r\n    204: '删除数据成功。',\r\n    400: '发出的请求有错误，服务器没有进行新建或修改数据的操作。',\r\n    401: '用户没有权限（令牌、用户名、密码错误）。',\r\n    403: '用户得到授权，但是访问是被禁止的。',\r\n    404: '发出的请求针对的是不存在的记录，服务器没有进行操作。',\r\n    406: '请求的格式不可得。',\r\n    410: '请求的资源被永久删除，且不会再得到的。',\r\n    422: '当创建一个对象时，发生一个验证错误。',\r\n    500: '服务器发生错误，请检查服务器。',\r\n    502: '网关错误。',\r\n    503: '服务不可用，服务器暂时过载或维护。',\r\n    504: '网关超时。',\r\n};\r\n\r\nconst checkStatus = response => {\r\n    if (response.status >= 200 && response.status < 300) {\r\n        return response;\r\n    }\r\n    const errortext = codeMessage[response.status] || response.statusText;\r\n    notification.error({\r\n        message: `请求错误 ${response.status}: ${response.url}`,\r\n        description: errortext,\r\n    });\r\n    const error = new Error(errortext);\r\n    error.name = response.status;\r\n    error.response = response;\r\n    throw error;\r\n};\r\n\r\nconst cachedSave = (response, hashcode) => {\r\n    /**\r\n     * Clone a response data and store it in sessionStorage\r\n     * Does not support data other than json, Cache only json\r\n     */\r\n    const contentType = response.headers.get('Content-Type');\r\n    if (contentType && contentType.match(/application\\/json/i)) {\r\n        // All data is saved as text\r\n        response\r\n            .clone()\r\n            .text()\r\n            .then(content => {\r\n                sessionStorage.setItem(hashcode, content);\r\n                sessionStorage.setItem(`${hashcode}:timestamp`, Date.now());\r\n            });\r\n    }\r\n    return response;\r\n};\r\n\r\n/**\r\n * Requests a URL, returning a promise.\r\n *\r\n * @param  {string} url       The URL we want to request\r\n * @param  {object} [option] The options we want to pass to \"fetch\"\r\n * @return {object}           An object containing either \"data\" or \"err\"\r\n */\r\nexport default function request(url, option) {\r\n    const options = {\r\n        expirys: false,\r\n        ...option,\r\n    };\r\n    /**\r\n     * Produce fingerprints based on url and parameters\r\n     * Maybe url has the same parameters\r\n     */\r\n    const fingerprint = url + (options.body ? JSON.stringify(options.body) : '');\r\n    const hashcode = hash\r\n        .sha256()\r\n        .update(fingerprint)\r\n        .digest('hex');\r\n\r\n    const defaultOptions = {\r\n        credentials: 'include',\r\n    };\r\n    let token = sessionStorage.getItem('authorization');\r\n    if(options.method !== 'POST' && url !== '/user/login'){\r\n        \r\n        if(!token){\r\n            window.location.href = '/public/spa/spa/login';\r\n        }\r\n    }\r\n    const newOptions = {...defaultOptions,\r\n        ...options,\r\n        headers:{\r\n            'authorization':token\r\n        }\r\n    };\r\n    if (\r\n        newOptions.method === 'POST' ||\r\n        newOptions.method === 'PUT' ||\r\n        newOptions.method === 'DELETE'\r\n    ) {\r\n        if (!(newOptions.body instanceof FormData)) {\r\n            newOptions.headers = {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json; charset=utf-8',\r\n                ...newOptions.headers,\r\n            };\r\n            newOptions.body = JSON.stringify(newOptions.body);\r\n        } else {\r\n            // newOptions.body is FormData\r\n            newOptions.headers = {\r\n                Accept: 'application/json',\r\n                ...newOptions.headers\r\n            };\r\n        }\r\n    }\r\n\r\n    const expirys = options.expirys && 60;\r\n    // options.expirys !== false, return the cache,\r\n    if (options.expirys !== false) {\r\n        const cached = sessionStorage.getItem(hashcode);\r\n        const whenCached = sessionStorage.getItem(`${hashcode}:timestamp`);\r\n        if (cached !== null && whenCached !== null) {\r\n            const age = (Date.now() - whenCached) / 1000;\r\n            if (age < expirys) {\r\n                const response = new Response(new Blob([cached]));\r\n                return response.json();\r\n            }\r\n            sessionStorage.removeItem(hashcode);\r\n            sessionStorage.removeItem(`${hashcode}:timestamp`);\r\n        }\r\n    }\r\n    return fetch(url, newOptions)\r\n        .then(checkStatus)\r\n        .then(response => cachedSave(response, hashcode))\r\n        .then(response => {\r\n            // DELETE and 204 do not return data by default\r\n            // using .json will report an error.\r\n            if (newOptions.method === 'DELETE' || response.status === 204) {\r\n                return response.text();\r\n            }\r\n\r\n            return response.json();\r\n        })\r\n        .catch(e => {\r\n            const status = e.name;\r\n            if (status === 401) {\r\n                window.location.href = '/public/spa/spa/login'\r\n                return;\r\n            }\r\n            // environment should not be used\r\n            if (status === 403) {\r\n                router.push('/exception/403');\r\n                return;\r\n            }\r\n            if (status <= 504 && status >= 500) {\r\n                router.push('/exception/500');\r\n                return;\r\n            }\r\n            if (status >= 404 && status < 422) {\r\n                router.push('/exception/404');\r\n            }\r\n        });\r\n}"],"sourceRoot":""}