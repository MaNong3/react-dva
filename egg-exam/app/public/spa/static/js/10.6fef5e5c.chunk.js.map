{"version":3,"sources":["components/BasicLayout.module.css","components/Header/Header.module.css","components/BasicLayout.jsx","components/aside/index.jsx","components/breadcrumb/index.jsx","components/Header/index.jsx","components/NoAutho.jsx","page/main/index.jsx"],"names":["module","exports","logo","header","layoutContent","layout","logout","slide","user","menu","Header","Content","Sider","BasicLayout","_this$props","this","props","aside","breadcrumb","react_default","a","createElement","layout_default","className","style","BasicLayout_Header","src","alt","width","collapsible","collapsedWidth","background","padding","React","Children","map","children","item","Component","SubMenu","Aside","connect","state","Object","objectSpread","main","global","dispatch","setOpenKeys","openKeys","type","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","groups","window","aab","menu_default","mode","height","borderRight","theme","onOpenChange","noAutho","key","id","title","icon_default","groupIcon","groupName","items","val","Item","router","to","pathname","path","parent","child","text","nextProps","childRoutes","viewAuthority","length","initGroups","forEach","result","find","push","isAutho","arr","findIndex","view_id","filter","showAside","every","BreadCrumb","withRouter","location","marginTop","store","login","user_name","userInfo","target","rel","href","Divider","onClick","dropdown_default","overlay","placement","styles","avatar_default","NoAutho","textAlign","color","fontSize","Authorization","history","components_NoAutho","router_view","Main","components_BasicLayout","components_breadcrumb","components_aside","components_Header","main_Authorization"],"mappings":"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","file":"static/js/10.6fef5e5c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"BasicLayout_logo__N9Zej\",\"header\":\"BasicLayout_header__9aW2N\",\"layoutContent\":\"BasicLayout_layoutContent__3dIUs\",\"layout\":\"BasicLayout_layout__2i4Vi\",\"logout\":\"BasicLayout_logout___2U8u\",\"slide\":\"BasicLayout_slide__1DBl6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"Header_user__10e7V\",\"menu\":\"Header_menu__WpWao\"};","import React, { Component } from 'react'\r\nimport style from './BasicLayout.module.css'\r\nimport {\r\n    Layout\r\n} from 'antd';\r\nconst { Header, Content, Sider } = Layout;\r\nclass BasicLayout extends Component {\r\n    render() {\r\n        let {aside,breadcrumb,header} = this.props;\r\n        return <Layout className={style.layout}>\r\n            <Header className={style.header}>\r\n                <div className={style.logo}>\r\n                    <img src=\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1551624718911&di=4a7004f8d71bd8da84d4eadf1b59e689&imgtype=0&src=http%3A%2F%2Fimg105.job1001.com%2Fupload%2Falbum%2F2014-10-15%2F1413365052_95IE3msH.jpg\" alt=\"\"/>\r\n                </div>\r\n                {/*  */}\r\n                <div className={style.logout}>\r\n                    {header}\r\n                </div>\r\n            </Header>\r\n            <Layout className={style.layoutContent}>\r\n                {/* 侧边栏 */}\r\n                <Sider \r\n                    width={200} \r\n                    collapsible\r\n                    collapsedWidth={0}\r\n                    style={{ background: '#fff' }}\r\n                    className={style.slide}\r\n                >\r\n                    {aside}\r\n                </Sider>\r\n                {/* 主要区域 */}\r\n                <Layout style={{ padding: '0 24px 24px' }}>\r\n                    {breadcrumb}\r\n                    <Content>\r\n                       {React.Children.map(this.props.children,item=>item)}\r\n                    </Content>\r\n                </Layout>\r\n            </Layout>\r\n        </Layout>\r\n    }\r\n}\r\n\r\nexport default BasicLayout;\r\n\r\n","import React, { Component } from 'react'\r\nimport {Menu,Icon} from 'antd'\r\nimport {Link} from 'dva/router'\r\nimport { connect } from 'dva';\r\nconst {SubMenu} = Menu\r\nlet mapState = (state)=>{\r\n  return {...state.main,...state.global}\r\n}\r\nlet mapDispatch = dispatch=>{\r\n  return {\r\n    setOpenKeys(openKeys){\r\n      dispatch({type:'main/setOpenKeys',openKeys});\r\n    }\r\n  }\r\n}\r\n@connect(mapState,mapDispatch)\r\nclass Aside extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      groups:[]\r\n    }\r\n  }\r\n  static getDerivedStateFromProps(nextProps){\r\n    let {childRoutes} = nextProps;\r\n    let {viewAuthority} = nextProps;\r\n    if(viewAuthority.length === 0){\r\n      return {}\r\n    }\r\n    // 对路由信息进行分类管理\r\n    let initGroups = [];\r\n    childRoutes && childRoutes.forEach(item=>{\r\n      let result = initGroups.find(val=>val.groupName === item.groupName);\r\n      if(result){\r\n        result.items.push(item)\r\n      }else{\r\n        initGroups.push({groupName:item.groupName,groupIcon:item.groupIcon,items:[item],id:item.id});\r\n      }\r\n    });\r\n    function isAutho(arr){\r\n      arr.forEach((item,key)=>{\r\n        if(viewAuthority.findIndex(val=>val.view_id === item.id) === -1){\r\n          item.noAutho = true;\r\n        }\r\n        if(item.items){\r\n          isAutho(item.items);\r\n        }\r\n      })\r\n    }\r\n    isAutho(initGroups);\r\n    initGroups.forEach(item=>{\r\n      item.items = item.items.filter(val=>val.showAside !== 'no');\r\n      if(item.items.every(val=>val.noAutho)){\r\n        item.noAutho = true;\r\n      }else{\r\n        item.noAutho = false;\r\n      }\r\n    })\r\n    return {\r\n     groups:initGroups\r\n    }\r\n  }\r\n  render() {\r\n    window.aab = this;\r\n    let {groups} = this.state;\r\n    let {openKeys,setOpenKeys} = this.props;\r\n    return <Menu\r\n      mode=\"inline\"\r\n      style={{ height: '100%', borderRight: 0 }}\r\n      openKeys={openKeys}\r\n      theme=\"dark\"\r\n      onOpenChange={(openKeys)=>setOpenKeys(openKeys)}\r\n    >\r\n      {\r\n        groups && groups.map(item=>{\r\n          if(item.noAutho){\r\n            return null;\r\n          }\r\n          return <SubMenu key={item.id} title={<span><Icon type={item.groupIcon} />{item.groupName}</span>}>\r\n            {\r\n              item.items && item.items.map(val=>{\r\n                if(val.noAutho){\r\n                  return null;\r\n                }\r\n                return <Menu.Item key={val.id}>\r\n                  <Link to={{pathname:val.path,state:{parent:item.groupName,child:val.text,id:val.id}}}>{val.text}</Link>\r\n                </Menu.Item>\r\n              })\r\n            }\r\n          </SubMenu>\r\n        })\r\n      }\r\n    </Menu>\r\n  }\r\n}\r\nexport default Aside;","import React, { Component } from 'react'\r\n// import {Breadcrumb} from 'antd'\r\nimport {withRouter} from 'dva/router'\r\n@withRouter\r\nclass BreadCrumb extends Component {\r\n  render() {\r\n    \r\n    \r\n    let {state} = this.props.location;\r\n    // let parent = '';\r\n    let child = '';\r\n    // console.log(this.props.history)\r\n    if(state){\r\n      // parent = state.parent;\r\n      child = state.child;\r\n    }\r\n    // return <Breadcrumb style={{ margin: '16px 0' }}>\r\n    //     <Breadcrumb.Item>{parent || '考试管理'}</Breadcrumb.Item>\r\n    //     <Breadcrumb.Item>{child || '添加试题'}</Breadcrumb.Item>\r\n    //   </Breadcrumb>\r\n    return (\r\n      <h2 style={{\r\n        padding: '20px 0',\r\n        marginTop: '10px'\r\n      }}>{child}</h2>\r\n    )\r\n  }\r\n}\r\nexport default BreadCrumb","import React, { Component } from 'react'\r\nimport {Avatar, Menu, Dropdown} from 'antd'\r\nimport {connect} from 'dva'\r\nimport {withRouter} from 'dva/router'\r\nimport styles from './Header.module.css'\r\n\r\nlet mapState = store => {\r\n    window.store = store;\r\n    return {...store.login,...store.main}\r\n}\r\n@withRouter\r\n@connect(mapState)\r\nclass Header extends Component {\r\n  componentDidMount(){\r\n    this.props.dispatch({type:'main/getUserInfo'});\r\n  }\r\n  render() {\r\n    const {user_name} = this.props.userInfo;\r\n    const menu = (\r\n      <Menu style={{width: '120px'}}>\r\n        <Menu.Item>\r\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"http://www.alipay.com/\">个人中心</a>\r\n        </Menu.Item>\r\n        <Menu.Item>\r\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"http://www.taobao.com/\">我的班级</a>\r\n        </Menu.Item>\r\n        <Menu.Divider />\r\n        <Menu.Item>\r\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"http://www.taobao.com/\">设置</a>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"logout\" onClick={()=>this.props.dispatch({type:'login/logout'})}>\r\n          退出登录\r\n        </Menu.Item>\r\n      </Menu>\r\n    )\r\n    return  (\r\n      <div>\r\n        <Dropdown overlay={menu} placement=\"bottomRight\">\r\n          <span className={styles.user}>\r\n            <Avatar src=\"https://cdn.nlark.com/yuque/0/2019/png/anonymous/1547609339813-e4e49227-157c-452d-be7e-408ca8654ffe.png?x-oss-process=image/resize,m_fill,w_48,h_48/format,png\" />\r\n            {user_name}\r\n          </span>\r\n        </Dropdown>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default Header;\r\n","import React from 'react'\r\nimport {Icon} from 'antd'\r\nfunction NoAutho(){\r\n    return <div style={{textAlign:'center'}}>\r\n        <Icon style={{color:'red','fontSize':'50px'}} type=\"close\" />\r\n        <div>没有权限</div>\r\n    </div>\r\n}\r\n\r\nexport default NoAutho;","import React, { Component } from 'react'\r\nimport BasicLayout from '../../components/BasicLayout'\r\nimport RouterView from '../../utils/router-view'\r\nimport Aside from '../../components/aside'\r\nimport BreadCrumb from '../../components/breadcrumb'\r\nimport Header from '../../components/Header'\r\nimport {connect} from 'dva'\r\nimport NoAutho from '../../components/NoAutho'\r\nlet mapState = store => {\r\n  return {...store.global}\r\n}\r\n@connect(mapState)\r\nclass Authorization extends Component{\r\n  render(){\r\n    let {history,viewAuthority} = this.props;\r\n    if(!history.location.state || viewAuthority.length === 0){\r\n      return <NoAutho />;\r\n    }\r\n    let index = viewAuthority.findIndex(item=>item.view_id === history.location.state.id);\r\n    if(index=== -1){\r\n      return <NoAutho />;\r\n    }\r\n    return <RouterView childRoutes={this.props.childRoutes} />\r\n  }\r\n}\r\nclass Main extends Component {\r\n  render() {\r\n    window.main = this;\r\n    return <BasicLayout \r\n        breadcrumb={<BreadCrumb />}\r\n        aside={<Aside childRoutes={this.props.childRoutes} />}\r\n        header={<Header />}\r\n      >\r\n        <Authorization {...this.props} />\r\n      </BasicLayout>\r\n  }\r\n}\r\n\r\nexport default Main"],"sourceRoot":""}